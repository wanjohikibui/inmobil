{% extends "base_unacol.html" %}

{% block title %}{{ consorcio.nombre }} - Balance del {{ balance.fecha_vencimiento|date:"m\/Y" }}{% endblock title %}

{% block extrahead %}
<script type="text/javascript" src="/static/js/jquery.ingrid-0.9.2.js"></script>
<script type="text/javascript" src="/static/js/jquery.jeditable.pack.js"></script>
<link rel="stylesheet" href="/static/js/ingrid.css" type="text/css" media="screen" />
{% endblock %}


{% block jquery %}
<script type="text/javascript">
$(document).ready(
     
	function() {
		
		
		$("#balance").ingrid({ 
			url: '/balance/detalle-{{ balance.id }}',
			//initialLoad: true,			
			height: {{ alto }},
			colWidths: [25,350,110,100],		// width of each column
			rowClasses: ['grid-row-style1','grid-row-style2'],
			resizableCols: false,
			paging: false,
			rowSelection: false,
			sorting: true
		});
		$(".edit-concepto").editable("/balance/item/concepto", {
				event     : "dblclick"
		});		
		$(".edit-categoria").editable("/balance/item/categoria", {
				event     : "dblclick"
		});				
		$(".edit-monto").editable("/balance/item/monto", {
						event     : "dblclick"
		});						
	}
); 
</script>

{% endblock jquery%}


{% block unacol %}

<h2>Consorcio "{{ consorcio.nombre }}" - {{ balance.fecha_vencimiento|date:"F \de Y" }}</h2>
<p>vencimiento {{ balance.fecha_vencimiento|date:"d-m-Y" }} - Identificador de Balance: {{ balance.id }}</p>


<table id="balance">
<thead>
<tr><th>#</th><th>Concepto</th><th>Categor√≠a</th><th>Monto</th></tr>
</thead>
<tbody>
{% for item in items %}
                         <tr>
                         <td>{{ item.id }}</td>
                         <td><div class="edit-concepto" id="{{ item.id }}">{{ item.concepto }}</div></td>
                         <td><div class="edit-categoria" id="{{ item.id }}">{{ item.categoria }}</td>
                         <td style="text-align:right">$ <div class="edit-monto" id="{{ item.id }}">{{ item.monto }}</td>                  
                         </tr>
                        {% endfor %} 
</tbody>
</table>
<table><tr class="grid-row-style3"><td colspan="3" style="text-align:right" width="491px">Total:</td><td width="100px" style="text-align:right">$ {{ total }}</td></tr></table>



<!--#TODO crear otra vista/template para cargar cada item-->

<h2>Agregar Items</h2>

<form action="./" method="POST">
{{ form_add_item.as_p }}
<input type="submit" value="agregar al balance" />
</form>



{% endblock %}

